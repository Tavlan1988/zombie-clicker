<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Кликер про зомби</title>
  <style>
    body {
      margin: 0;
      padding: 0;
      font-family: 'Comic Sans MS', cursive, sans-serif;
      background: #111;
      color: white;
      overflow: hidden;
      touch-action: manipulation;
    }
    #game {
      position: relative;
      width: 100vw;
      height: 100vh;
      background: #000 url('images/imagesbackground.png') center/cover;
      box-sizing: border-box;
    }
    .zombie {
      position: absolute;
      width: 80px;
      height: 80px;
      background: url('images/zombie.png') no-repeat center/contain;
      transform: scaleX(-1);
      cursor: pointer;
      filter: brightness(1);
      transition: filter 0.1s;
      background-size: contain;
      background-position: center;
      background-color: transparent;
    }
    .zombie:active {
      transform: scaleX(-1) scale(0.95);
    }
    #hud {
      position: absolute;
      bottom: 0;
      left: 0;
      width: 100%;
      height: 120px;
      background: rgba(0, 0, 0, 0.8);
      display: flex;
      align-items: center;
      justify-content: space-around;
      font-size: 20px;
      border-top: 3px solid #4CAF50;
      box-sizing: border-box;
      z-index: 10;
    }
    .score-box {
      font-size: 28px;
      font-weight: bold;
      text-shadow: 2px 2px 4px #000;
    }
    button {
      background: #4CAF50;
      border: none;
      color: white;
      padding: 12px 18px;
      font-size: 18px;
      border-radius: 12px;
      cursor: pointer;
      box-shadow: 0 3px 6px rgba(0,0,0,0.3);
      transition: transform 0.1s, background 0.2s;
    }
    button:active {
      transform: scale(0.95);
    }
    button:hover {
      background: #45a049;
    }
    #hut-image {
      position: absolute;
      bottom: 165px;
      left: 50%;
      transform: translateX(-50%);
      width: 80px;
      height: 60px;
      background: url('images/hut.png') no-repeat center/contain;
      background-size: contain;
      z-index: 5;
    }
    #hut-bar {
      position: absolute;
      bottom: 130px;
      left: 50%;
      transform: translateX(-50%);
      width: 80%;
      max-width: 300px;
      height: 20px;
      background: #333;
      border-radius: 10px;
      overflow: hidden;
      border: 2px solid #555;
      z-index: 5;
    }
    #hut-health {
      width: 100%;
      height: 100%;
      background: #f44336;
      transition: width 0.3s ease;
    }
    #hut-label {
      position: absolute;
      bottom: 155px;
      left: 50%;
      transform: translateX(-50%);
      font-size: 18px;
      color: white;
      text-shadow: 1px 1px 2px #000;
      z-index: 5;
    }
  </style>
</head>
<body>

  <!-- Игровое поле -->
  <div id="game"></div>

  <!-- Надпись "Жизни" -->
  <div id="hut-label">Жизни: <span id="hut-lives">10</span></div>

  <!-- Изображение будки -->
  <div id="hut-image"></div>

  <!-- Полоска здоровья будки -->
  <div id="hut-bar">
    <div id="hut-health"></div>
  </div>

  <!-- Панель управления -->
  <div id="hud">
    <div class="score-box">Очки: <span id="score">0</span></div>
    <button onclick="upgradeClick()">💥 Усилить клик (50)</button>
    <button onclick="upgradeZombie()">🧟 Усложнить зомби (100)</button>
  </div>

  <script>
    // Переменные
    let score = 0;
    let clickPower = 1;
    let zombieHealth = 1;
    let maxLives = 10;
    let currentLives = maxLives;
    let zombies = [];
    let spawnInterval;

    // Элементы
    const gameArea = document.getElementById('game');
    const scoreElement = document.getElementById('score');
    const hutLivesElement = document.getElementById('hut-lives');
    const hutHealthBar = document.getElementById('hut-health');

    // Обновить счёт
    function updateScore() {
      scoreElement.textContent = score;
    }

    // Обновить жизни будки
    function updateHutLives() {
      hutLivesElement.textContent = currentLives;
      const width = (currentLives / maxLives) * 100;
      hutHealthBar.style.width = width + '%';
    }

    // Прокачка клика
    function upgradeClick() {
      if (score >= 50) {
        score -= 50;
        clickPower += 1;
        alert(`💥 Сила клика: ${clickPower}!`);
        updateScore();
      } else {
        alert('❌ Недостаточно очков!');
      }
    }

    // Прокачка зомби
    function upgradeZombie() {
      if (score >= 100) {
        score -= 100;
        zombieHealth += 1;
        alert(`🧟 Зомби теперь живучее! HP: ${zombieHealth}`);
        updateScore();
      } else {
        alert('❌ Недостаточно очков!');
      }
    }

    // Создать зомби сверху
    function spawnZombie() {
      const zombie = document.createElement('div');
      zombie.className = 'zombie';

      const left = 100 + Math.random() * (window.innerWidth - 200);
      zombie.style.left = `${left}px`;
      zombie.style.top = '60px';

      zombie.health = zombieHealth;

      // Клик
      zombie.addEventListener('click', () => {
        zombie.health -= clickPower;
        zombie.style.filter = 'brightness(0.5)';
        setTimeout(() => {
          zombie.style.filter = 'brightness(1)';
        }, 100);

        if (zombie.health <= 0) {
          score += 1;
          updateScore();
          if (zombie.moveInterval) {
            clearInterval(zombie.moveInterval);
          }
          if (zombie.parentNode) {
            gameArea.removeChild(zombie);
          }
          zombies = zombies.filter(z => z !== zombie);
        }
      });

      gameArea.appendChild(zombie);
      zombies.push(zombie);

      // Движение вниз
      moveZombie(zombie);
    }

    // Движение вниз
    function moveZombie(zombie) {
      let pos = 60;
      zombie.moveInterval = setInterval(() => {
        pos += 2;
        zombie.style.top = `${pos}px`;

        // Если добрался до низа — минус 1 жизнь
        if (pos >= window.innerHeight - 150) {
          currentLives -= 1;
          updateHutLives();
          if (zombie.parentNode) {
            gameArea.removeChild(zombie);
          }
          zombies = zombies.filter(z => z !== zombie);
          clearInterval(zombie.moveInterval);

          // Проверка на конец игры
          if (currentLives <= 0) {
            gameOver();
          }
        }
      }, 50);
    }

    // Конец игры
    function gameOver() {
      clearInterval(spawnInterval);
      setTimeout(() => {
        alert(`💀 ИГРА ОКОНЧЕНА!\nТы набрал ${score} очков!`);
        location.reload();
      }, 100);
    }

    // Запуск спавна
    spawnInterval = setInterval(spawnZombie, 2000);

    // Инициализация
    updateHutLives();
  </script>
</body>
</html>